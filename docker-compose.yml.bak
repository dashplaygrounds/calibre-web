version: '3'
services:
  calibre:
    image: ghcr.io/linuxserver/calibre
    container_name: calibre
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - /calibre/config:/config
      - /calibre/upload:/uploads
      - /calibre/plugins:/plugins
      - /data/books:/Calibre_Library
      - /data/uploads:/uploads
    ports:
      - 8079:8080
      - 8081:8081
    restart: always
    networks:
      - ebooks

  calibre-web:
      image: ghcr.io/linuxserver/calibre-web
      container_name: calibre-web
      depends_on:
        - calibre
      environment:
        - PUID=1000
        - PGID=1000
        - TZ=Etc/UTC
        - DOCKER_MODS=linuxserver/mods:universal-calibre
        - OAUTHLIB_RELAX_TOKEN_SCOPE=1
      volumes:
        - ./config:/config
        - ./books:/books
      restart: always
      ports:
        - 8083:8083
      networks:
        - ebooks
networks:
  ebooks:
    external: true
